package Escudo;

import java.awt.Color;

import javax.swing.JPanel;

import Entidad.EntidadConVida;
import Utils.Posicion;
import Utils.Size;

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

public class EscudoHealer extends Escudo
{
	///////////////////////////////////////////////////////////////////////////////////////////////
	
	private final double	HEAL_POR_SEG = 10.0,
							HEAL_TOTAL = 200.0;

	///////////////////////////////////////////////////////////////////////////////////////////////
	
	private double totalHPRegenerado;
	
	///////////////////////////////////////////////////////////////////////////////////////////////
	
	public EscudoHealer( EntidadConVida holder )
	{
		this.pos	= new Posicion(2, 2);
		this.tamano	= new Size(10, 10);
		this.panel	= new JPanel();
		
		this.holder = holder;

		this.totalHPRegenerado = 0;
		
		this.actualizarPanel(true, Color.green);
	}

	///////////////////////////////////////////////////////////////////////////////////////////////
	
	public void actualizar(double msDesdeUltActualizacion)
	{
		double curacion = conversionEnTiempo( HEAL_POR_SEG, msDesdeUltActualizacion );
		
		// Verificar que no curemos de más
		if ((curacion + totalHPRegenerado) > HEAL_TOTAL)
			curacion = HEAL_TOTAL - totalHPRegenerado;
		
		totalHPRegenerado += curacion;
		
		holder.setVida( holder.getVida() + curacion );
		
		// Al haber curado toda la vida, destruir el escudo
		if (totalHPRegenerado == HEAL_TOTAL)
		{
			System.out.println("Escudo regeneracion: off!");
			remove();
		}
	}
	
	///////////////////////////////////////////////////////////////////////////////////////////////
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////