package Entidad;

import java.util.List;

import Arma.Arma;
import Escudo.Escudo;

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

public abstract class EntidadConVida extends Entidad
{
	///////////////////////////////////////////////////////////////////////////////////////////////
	
	protected double		vida;
	protected Arma			arma;
	protected List<Escudo>	escudo;
	
	///////////////////////////////////////////////////////////////////////////////////////////////
	
	public void morir( )
	{
	}
	
	///////////////////////////////////////////////////////////////////////////////////////////////
	
	public void setArma( Arma arma )
	{
		this.arma = arma;
		this.panel.add( arma.getPanel() );
	}
	
	public Arma getArma( )
	{
		return arma;
	}
	
	///////////////////////////////////////////////////////////////////////////////////////////////
	
	public void addEscudo( Escudo e )
	{
		escudo.add( e );
	}
	
	public void removeEscudo( Escudo e )
	{
		this.panel.remove( e.getPanel() );
		
		escudo.remove( e );
	}
	
	///////////////////////////////////////////////////////////////////////////////////////////////
	
	public void setVida(double vida)
	{
		this.vida = vida;
		if (vida <= 0)
		{
			morir( );
			remove( );
		}
	}

	public double getVida()
	{
		return vida;
	}

	///////////////////////////////////////////////////////////////////////////////////////////////
	
	private double utilizarEscudos( double dmg )
	{
		for (Escudo e: escudo)
			dmg = e.modificarDmg( dmg );
		
		return dmg;
	}

	///////////////////////////////////////////////////////////////////////////////////////////////
	
	public void recibirDMG(double dmg)
	{
		dmg = utilizarEscudos( dmg );
		
		vida -= dmg;
		if (vida <= 0)
		{
			morir( );
			remove( );
		}
	}

	///////////////////////////////////////////////////////////////////////////////////////////////
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////