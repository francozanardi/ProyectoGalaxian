package Entidad;

import javax.swing.JPanel;

import Colisiones.Colisionador;
import Colisiones.ColisionadorEntidad;
import Mapa.Mapa;
import Utils.Posicion;
import Utils.Size;

import java.awt.Color;

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

public abstract class Entidad
{
	///////////////////////////////////////////////////////////////////////////////////////////////
	
	protected JPanel	panel;
	protected Posicion	pos;
	protected Size		tamano;
	protected Mapa		map;
	protected Colisionador colisionador = new ColisionadorEntidad();
	
	///////////////////////////////////////////////////////////////////////////////////////////////
	
	public JPanel obtenerPanel( )
	{
		return panel;
	}
	
	///////////////////////////////////////////////////////////////////////////////////////////////
	
	protected void actualizarPanel( boolean esOpaco, Color colorFondo )
	{
		actualizarPosicion( );
		panel.setLayout( null );
		panel.setOpaque( esOpaco );
		panel.setBackground( colorFondo );
		panel.setVisible( true );
	}

	///////////////////////////////////////////////////////////////////////////////////////////////
	
	protected void actualizarPosicion()
	{
		panel.setBounds(
			(int) Math.round( pos.getX() ),
			(int) Math.round( pos.getY() ),
			tamano.getWidth(),
			tamano.getHeight()
		);
	}
	
	///////////////////////////////////////////////////////////////////////////////////////////////
	
	public void eliminar()
	{
		map.borrarEntidad(this);
		panel.setVisible(false);
		panel	= null;
		pos		= null;
		tamano	= null;
	}

	///////////////////////////////////////////////////////////////////////////////////////////////
	
	public Posicion getPos( )
	{
		return pos;
	}
		
	public void setPos( Posicion newPos )
	{
		pos.setX( newPos.getX() );
		pos.setY( newPos.getY() );
	}
	
	///////////////////////////////////////////////////////////////////////////////////////////////
	
	public Size getSize( )
	{
		return tamano;
	}
	
	///////////////////////////////////////////////////////////////////////////////////////////////
	
	public void setMapa( Mapa map )
	{
		this.map = map;
	}
	
	///////////////////////////////////////////////////////////////////////////////////////////////
	
	public void colisionar(Entidad e)
	{
		e.serChocado(colisionador);
	}
	
	public void serChocado(Colisionador col) {
		//col.afectar(this);
	}

	public abstract void actualizar();
	
}

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////